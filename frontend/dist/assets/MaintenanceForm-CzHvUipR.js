import{b as y,r as q,w as S,c as s,o as l,a as e,x as d,m as k,z as m,F as b,q as p,t as u,u as c,y as M,E as T,D as V}from"./index-DABYzIn3.js";import{u as w}from"./maintenanceStore-DFeLB48W.js";const C=["value"],D={key:0,class:"text-xs text-red-500 mt-1"},U=["value"],j={class:"flex justify-end pt-4"},B={type:"submit",class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},O={__name:"MaintenanceForm",props:{maquina:[String,Object],tecnico:[String,Object],data:String,status:String,buttonText:{type:String,default:"Salvar"},cancelText:{type:String,default:"Cancelar"}},emits:["submit","cancel"],setup(r,{emit:f}){const i=w(),g=r,v=f;y(()=>{i.opcoesMaquinas.length===0&&i.fetchOpcoes()});const o=q({maquina:"",tecnico:"",data:"",status:"Pendente"});S(g,n=>{o.value.maquina=n.maquina?.id||n.maquina?._id||n.maquina||"",o.value.tecnico=n.tecnico?.id||n.tecnico?._id||n.tecnico||"",o.value.data=n.data||"",o.value.status=n.status||"Pendente"},{immediate:!0});function x(){v("submit",{...o.value})}return(n,t)=>(l(),s("form",{onSubmit:V(x,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Máquina",-1)),d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.maquina=a),required:"",class:"mt-1 block w-full shadow-sm h-10 px-3 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},[t[5]||(t[5]=e("option",{value:"",disabled:""},"Selecione uma máquina",-1)),(l(!0),s(b,null,p(c(i).opcoesMaquinas,a=>(l(),s("option",{key:a.id,value:a.id},u(a.nome)+" ("+u(a.tipo)+") ",9,C))),128))],512),[[m,o.value.maquina]]),c(i).opcoesMaquinas.length===0?(l(),s("p",D," Nenhuma máquina cadastrada no banco. ")):k("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Técnico",-1)),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.tecnico=a),required:"",class:"mt-1 block w-full shadow-sm h-10 px-3QP border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},[t[7]||(t[7]=e("option",{value:"",disabled:""},"Selecione um técnico",-1)),(l(!0),s(b,null,p(c(i).opcoesTecnicos,a=>(l(),s("option",{key:a.id,value:a.id},u(a.nome),9,U))),128))],512),[[m,o.value.tecnico]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"data",class:"block text-sm font-medium text-gray-700"},"Data",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.data=a),type:"date",required:"",class:"mt-1 block w-full shadow-sm h-10 px-3 border-gray-300 rounded-md"},null,512),[[M,o.value.data]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.status=a),class:"mt-1 block w-full h-10 px-3 border-gray-300 rounded-md"},[...t[10]||(t[10]=[e("option",null,"Concluída",-1),e("option",null,"Pendente",-1),e("option",null,"Atrasada",-1)])],512),[[m,o.value.status]])]),e("div",j,[T(n.$slots,"footer-actions-left"),e("button",{type:"button",onClick:t[4]||(t[4]=a=>n.$emit("cancel")),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md mr-2"},u(r.cancelText),1),e("button",B,u(r.buttonText),1)])],32))}};export{O as _};
