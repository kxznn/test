import{c as m,o as u,a as t,F as v,q as w,t as c,n as _,r as g,b as M,k,m as $,l as q,j as C,x,y,z as F,u as L,A as V}from"./index-DABYzIn3.js";import{_ as A}from"./MaintenanceForm-CzHvUipR.js";import{u as S}from"./maintenanceStore-DFeLB48W.js";const D={class:"bg-white p-6 rounded-lg shadow-md"},E={class:"min-w-full divide-y divide-gray-200"},T={class:"bg-white divide-y divide-gray-200"},B={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},N={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},j={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},z={class:"px-6 py-4 whitespace-nowrap"},P={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},R=["onClick"],I={__name:"MaintenanceTable",props:{manutencoes:Array},emits:["viewEdit"],setup(f,{emit:i}){const p=i,d=r=>{switch(r?.toLowerCase()){case"concluída":return"bg-green-100 text-green-800";case"pendente":return"bg-yellow-100 text-yellow-800";case"atrasada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},s=r=>{if(!r)return"";const n=r.split("-");if(n.length===3){const[a,o,e]=n;return`${e}/${o}/${a}`}return r};return(r,n)=>(u(),m("div",D,[n[1]||(n[1]=t("h2",{class:"text-xl font-bold mb-4"},"Lista de Manutenções",-1)),t("table",E,[n[0]||(n[0]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Máquina"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Técnico"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Data"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Ações")])],-1)),t("tbody",T,[(u(!0),m(v,null,w(f.manutencoes,a=>(u(),m("tr",{key:a.id},[t("td",B,c(a.id),1),t("td",N,c(a.maquina?.nome||"Desconhecida"),1),t("td",U,c(a.tecnico?.nome||"Não atribuído"),1),t("td",j,c(s(a.data)),1),t("td",z,[t("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",d(a.status)])},c(a.status),3)]),t("td",P,[t("button",{onClick:o=>p("viewEdit",a.id),class:"text-indigo-600 hover:text-indigo-900 font-medium px-3 py-1 rounded-md hover:bg-indigo-50"}," Ver / Editar ",8,R)])]))),128))])])]))}},G={class:"flex justify-between items-center mb-6"},H={key:0,class:"mb-8 bg-white p-6 rounded-lg shadow-md"},J={class:"mb-6 bg-white p-4 rounded-lg shadow-md flex space-x-4"},K={class:"flex-1"},O={class:"flex-1"},Q={class:"flex-1"},W={key:1,class:"text-center"},tt={__name:"MaintenanceListView",setup(f){const i=S(),p=V(),d=g(!1),s=g({maquina:"",status:"",dataFiltro:""});M(()=>{i.manutencoes.length===0&&i.fetchManutencoes()});const r=k(()=>i.manutencoes.filter(o=>{const l=(o.maquina?.nome||"").toLowerCase().includes(s.value.maquina.toLowerCase()),b=s.value.status===""||o.status?.toLowerCase()===s.value.status.toLowerCase(),h=s.value.dataFiltro===""||o.data===s.value.dataFiltro;return l&&b&&h}));async function n(o){try{await i.addManutencao(o),d.value=!1}catch(e){console.error(e)}}function a(o){p.push(`/lista/${o}`)}return(o,e)=>(u(),m("div",null,[t("div",G,[e[4]||(e[4]=t("h1",{class:"text-3xl font-bold text-gray-800"},"Manutenções",-1)),t("button",{onClick:e[0]||(e[0]=l=>d.value=!d.value),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},c(d.value?"Fechar Formulário":"Adicionar Manutenção"),1)]),d.value?(u(),m("div",H,[e[5]||(e[5]=t("h2",{class:"text-xl font-bold mb-4"},"Registro de Manutenção",-1)),C(A,{onSubmit:n})])):$("",!0),t("div",J,[t("div",K,[e[6]||(e[6]=t("label",{for:"filtro-maquina",class:"block text-sm font-medium text-gray-700"},"Filtrar por Máquina",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.maquina=l),type:"text",id:"filtro-maquina",class:"mt-1 block w-full shadow-sm h-10 px-3 py-2 border-gray-300 rounded-md"},null,512),[[y,s.value.maquina]])]),t("div",O,[e[8]||(e[8]=t("label",{for:"filtro-status",class:"block text-sm font-medium text-gray-700"},"Filtrar por Status",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.status=l),id:"filtro-status",class:"mt-1 block w-full h-10 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[...e[7]||(e[7]=[t("option",{value:""},"Todos",-1),t("option",{value:"Concluída"},"Concluída",-1),t("option",{value:"Pendente"},"Pendente",-1),t("option",{value:"Atrasada"},"Atrasada",-1)])],512),[[F,s.value.status]])]),t("div",Q,[e[9]||(e[9]=t("label",{for:"filtro-data",class:"block text-sm font-medium text-gray-700"},"Filtrar por Data",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.dataFiltro=l),type:"date",id:"filtro-data",class:"mt-1 block w-full shadow-sm h-10 px-3 py-2 border-gray-300 rounded-md"},null,512),[[y,s.value.dataFiltro]])])]),L(i).isLoading?(u(),m("div",W,"Carregando...")):(u(),q(I,{key:2,manutencoes:r.value,onViewEdit:a},null,8,["manutencoes"]))]))}};export{tt as default};
