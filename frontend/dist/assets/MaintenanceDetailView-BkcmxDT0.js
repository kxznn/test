import{k as f,B as v,r as h,b as x,A as g,c as u,a as i,t as y,j as b,C as w,o as l,D as M}from"./index-DABYzIn3.js";import{u as _}from"./maintenanceStore-DFeLB48W.js";import{_ as C}from"./MaintenanceForm-CzHvUipR.js";const D={class:"text-3xl font-bold text-gray-800 mb-6"},k={key:0,class:"text-center"},E={key:1,class:"bg-white p-6 rounded-lg shadow-md space-y-4"},V={__name:"MaintenanceDetailView",setup(S){const d=v(),s=g(),o=_(),r=f(()=>d.params.id),a=h(null);x(async()=>{o.manutencoes.length===0&&await o.fetchManutencoes();const n=o.manutencoes.find(e=>String(e.id)===r.value);n?a.value={...n}:(console.error(`Manutenção com ID ${r.value} não encontrada.`),s.push("/lista"))});async function m(n){try{const e={id:a.value.id,...n};await o.updateManutencao(e),s.push("/lista")}catch(e){console.error("Falha ao salvar a edição:",e)}}async function p(){if(window.confirm(`Tem certeza que deseja excluir a manutenção #${r.value}?`))try{await o.deleteManutencao(String(a.value.id)),s.push("/lista")}catch(e){console.error("Falha ao excluir a manutenção:",e),alert(`Erro ao excluir a manutenção. Detalhe: ${e.message}`)}}function c(){s.push("/lista")}return(n,e)=>(l(),u("div",null,[i("h1",D,"Editar Manutenção #"+y(r.value),1),a.value?(l(),u("div",E,[b(C,{maquina:a.value.maquina,"onUpdate:maquina":e[0]||(e[0]=t=>a.value.maquina=t),data:a.value.data,"onUpdate:data":e[1]||(e[1]=t=>a.value.data=t),tecnico:a.value.tecnico,"onUpdate:tecnico":e[2]||(e[2]=t=>a.value.tecnico=t),status:a.value.status,"onUpdate:status":e[3]||(e[3]=t=>a.value.status=t),onSubmit:m,onCancel:c,"button-text":"Salvar Edição","cancel-text":"Cancelar Edição"},{"footer-actions-left":w(()=>[i("button",{onClick:M(p,["prevent"]),class:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors mr-auto"}," Excluir ")]),_:1},8,["maquina","data","tecnico","status"]),i("div",{class:"mt-6 flex justify-start pt-4 border-t"},[i("button",{onClick:c,class:"text-indigo-600 hover:text-indigo-900 font-medium flex items-center px-3 py-1 rounded-md hover:bg-gray-100 transition-colors"}," ← Voltar para a Lista ")])])):(l(),u("div",k,"Carregando detalhes..."))]))}};export{V as default};
